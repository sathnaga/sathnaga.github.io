---
layout: post
title: Testing KVM on Power Using Avocado Test Framework
date: '2018-05-17T16:49:00.000+05:30'
author: Satheesh
tags:
- qemu
- testing
- linux
- kvm
- avocado
- automation
- powerpc
modified_time: '2018-05-17T18:52:34.164+05:30'
blogger_id: tag:blogger.com,1999:blog-3781127847171836973.post-481602518058385301
blogger_orig_url: http://www.sathnaga86.com/2018/05/testing-kvm-on-power-using-avocado-test.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><h2><b><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><i>This blog explains about how to setup avocado, avocado-vt framework to test KVM on IBM Power platform.</i></span></b></h2><div><b><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><i><br /></i></span></b></div><h3 style="text-align: left;"><u><i><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">Introduction to Avocado Framework:</span></i></u></h3><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><span style="color: blue;"><a href="https://github.com/avocado-framework/avocado" target="_blank">Avocado Test Framework</a></span>, a python based opensource test framework is one of the best available open source test framework for Linux and especially it has enormous test scenarios for KVM Testing using its<span style="color: blue;">&nbsp;<a href="http://avocado-vt.readthedocs.io/en/latest/" target="_blank"><span style="color: blue;">avocado-vt</span></a>&nbsp;</span>plugin and tests from&nbsp;<a href="https://github.com/autotest/tp-libvirt" target="_blank"><span style="color: blue;">tp-libvirt</span></a>&nbsp;and<a href="https://github.com/autotest/tp-qemu" target="_blank">&nbsp;<span style="color: blue;">tp-qemu</span></a>.</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">It comprises of thousands of KVM test scenarios:</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;"><br /></span><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">$avocado list -V --vt-type=libvirt</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">...</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">TEST TYPES SUMMARY</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">...</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">VT: 29912</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">$avocado list -V --vt-type=qemu</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">...</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;"><br /></span><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">TEST TYPES SUMMARY</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">==================</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">...</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: xx-small;">VT: 4112</span><br /><div><br />More details about the framework can be found on the respective hyperlinks to the framework github links.<br /><br /></div><h3 style="text-align: left;"><u><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">Steps to setup avocado in host and run KVM tests:</span></u></h3><i><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">Make sure your host has all packages installed which are needed to run&nbsp;KVM guests(VM) through&nbsp;libvirt.</span></i><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><i>Below tests results are from Fedora28&nbsp;in IBM Power8 host.</i></span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;"><i>System logged in as root user.</i></span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><span style="color: blue; font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;"><i>Installing avocado...</i></span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#git clone https://github.com/avocado-framework/avocado.git</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#cd avocado</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#make requirements</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#python setup.py install</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><span style="color: blue; font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;"><i>Installing avocado-vt...</i></span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#git clone https://github.com/avocado-framework/avocado-vt.git</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#cd avocado-vt</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#make requirements</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#python setup.py install</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><span style="color: blue; font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;"><i>Bootstrapping to get guest(VM) image, configs and tests...</i></span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#sudo avocado vt-bootstrap --vt-type qemu</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">------------&gt;&nbsp;<i>Say yes to download JeOS guest image</i></span><br /><div><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><span style="color: blue; font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;"><i>Running boot test a VM...</i></span></div><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">#</span><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">avocado run boot --vt-type qemu --vt-guest-os JeOS.27.ppc64le</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;">JOB ID&nbsp; &nbsp; &nbsp;: d9952d2c1298683682c4f570561760a2a0f53e28</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;">JOB LOG&nbsp; &nbsp; : /home/sath/avocado-fvt-wrapper/results/job-2018-05-17T06.59-d9952d2/job.log</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;">&nbsp;(1/1) io-github-autotest-qemu.boot: PASS (38.99 s)</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;">RESULTS&nbsp; &nbsp; : PASS 1 | ERROR 0 | FAIL 0 | SKIP 0 | WARN 0 | INTERRUPT 0 | CANCEL 0</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif; font-size: x-small;">JOB TIME&nbsp; &nbsp;: 44.45 s</span><br /><br /><div><br /></div><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><span style="font-family: &quot;times new roman&quot;;"><i><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">Many more tests are available which can be browsed by `</span><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">avocado list -V --vt-type=qemu`</span></i></span></span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;">In similar way tests can be run through libvirt also and it is more comfortable with help of my recent patches to avocado-vt framework, next blog will explain in details.</span><br /><span style="font-family: &quot;times&quot; , &quot;times new roman&quot; , serif;"><br /></span><br /><div><i><span style="color: blue;">Hope this helps you in someways!</span></i><br /><i><span style="color: blue;">Thanks for taking time in reading this blog...</span></i></div></div>